from telegram import Update, ReplyKeyboardMarkup
from telegram.ext import ApplicationBuilder, CommandHandler, MessageHandler, filters, ContextTypes
from collections import defaultdict
import tok

questions = [
    {"q": "1Ô∏è‚É£ –ö–∞–∫–æ–π —Ç–≤–æ–π –ª—é–±–∏–º—ã–π —à–∫–æ–ª—å–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç?",
     "options": ["–ò–Ω—Ñ–æ–º–∞—Ç–∏–∫–∞ –∏ —Ñ–∏–∑–∏–∫–∞", "–ë–∏–æ–ª–æ–≥–∏—è –∏ —Ö–∏–º–∏—è", "–¢—Ä—É–¥/–§–∏–∑—Ä–∞", "–û–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ"]},
    {"q": "2Ô∏è‚É£ –ß–µ–º —Ç—ã –ª—é–±–∏—à—å –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –≤ —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è?",
     "options": ["–ò–≥—Ä–∞—Ç—å –≤ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ –∏–≥—Ä—ã –∏ –≤–æ–∑–∏—Ç—å—Å—è —Å —Ç–µ—Ö–Ω–∏–∫–æ–π",
                 "–£—Ö–∞–∂–∏–≤–∞—Ç—å –∑–∞ –¥–æ–º–∞—à–Ω–∏–º–∏ –ø–∏—Ç–æ–º—Ü–∞–º–∏, —Ö–æ–¥–∏—Ç—å –≤ –ø–æ—Ö–æ–¥—ã", "–ì–æ—Ç–æ–≤–∏—Ç—å, —á—Ç–æ-—Ç–æ –º–∞—Å—Ç–µ—Ä–∏—Ç—å —Å–≤–æ–∏–º–∏ —Ä—É–∫–∞–º–∏",
                 "–û—Ä–≥–∞–Ω–∏–∑–æ–≤–æ–≤–∞—Ç—å —á—Ç–æ-—Ç–æ –¥–ª—è –¥—Ä—É–∑–µ–π, —á–∏—Ç–∞—Ç—å –ø—Ä–æ –±–∏–∑–Ω–µ—Å"]},
    {"q": "3Ô∏è‚É£ –ö–∞–∫—É—é —Å—É–ø–µ—Ä—Å–∏–ª—É —Ç—ã –±—ã —Ö–æ—Ç–µ–ª –∏–º–µ—Ç—å?",
     "options": ["–∞) –£–ø—Ä–∞–≤–ª—è—Ç—å –º–∞—à–∏–Ω–∞–º–∏ —Å–∏–ª–æ–π –º—ã—Å–ª–∏", "–±) –†–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏ –∏ —Ä–∞—Å—Ç–µ–Ω–∏—è–º–∏",
                 "–≤) –°–æ–∑–¥–∞–≤–∞—Ç—å —Å–∞–º—ã–µ –≤–∫—É—Å–Ω—ã–µ –±–ª—é–¥–∞ –≤ –º–∏—Ä–µ –æ–¥–Ω–∏–º –≤–∑–º–∞—Ö–æ–º —Ä—É–∫–∏",
                 "–≥) –í–∏–¥–µ—Ç—å –±—É–¥—É—â–µ–µ –∏ –ª—É—á—à–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏"]},
    {"q": "4Ô∏è‚É£ –ö–∞–∫–∞—è —Ä–∞–±–æ—á–∞—è –æ–±—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–±–µ –±–ª–∏–∂–µ?",
     "options": ["–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –û—Ñ–∏—Å –∏–ª–∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞–º–∏ –∏ –≥–∞–¥–∂–µ—Ç–∞–º–∏", "–°–≤–µ–∂–∏–π –≤–æ–∑–¥—É—Ö, –ø–æ–ª–µ, —Ñ–µ—Ä–º–∞",
                 "–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π —Ü–µ—Ö", "–ö—É—Ö–Ω—è, –≥–¥–µ —á—Ç–æ-—Ç–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è"]},
    {"q": "5Ô∏è‚É£ –ß—Ç–æ –≤–∞—Å –±–æ–ª—å—à–µ –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç?",
     "options": ["–†–∞–±–æ—Ç–∞ —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º", "–í–Ω–µ–¥—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è",
                 "–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤", "–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã"]}
]


APK_PROFILES = {
    "digital": {
        "name": "üíª –¶–∏—Ñ—Ä–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∏–Ω–∂–µ–Ω–µ—Ä–∏—è –≤ –ê–ü–ö",
        "description": "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ IT-—Ä–µ—à–µ–Ω–∏–π, —Ä–æ–±–æ—Ç–æ—Ç–µ—Ö–Ω–∏–∫–∞, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–µ–ª—å—Å–∫–æ–≥–æ —Ö–æ–∑—è–π—Å—Ç–≤–∞, —Ç–æ—á–Ω–æ–µ –∑–µ–º–ª–µ–¥–µ–ª–∏–µ."
    },
    "agronomy": {
        "name": "üå± –ê–≥—Ä–æ–Ω–æ–º–∏—è –∏ —Ä–∞—Å—Ç–µ–Ω–∏–µ–≤–æ–¥—Å—Ç–≤–æ",
        "description": "–í—ã–≤–µ–¥–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–æ—Ä—Ç–æ–≤, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≤—ã—Ä–∞—â–∏–≤–∞–Ω–∏—è —Ä–∞—Å—Ç–µ–Ω–∏–π, –∑–∞—â–∏—Ç–∞ —É—Ä–æ–∂–∞—è, —Å–µ–ª–µ–∫—Ü–∏—è, –∞–≥—Ä–æ—Ö–∏–º–∏—è."
    },
    "livestock": {
        "name": "üêÑ –ñ–∏–≤–æ—Ç–Ω–æ–≤–æ–¥—Å—Ç–≤–æ –∏ –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä–∏—è",
        "description": "–†–∞–∑–≤–µ–¥–µ–Ω–∏–µ —Å–µ–ª—å—Å–∫–æ—Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö, –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä–∏—è, –∑–æ–æ—Ç–µ—Ö–Ω–∏—è, –≥–µ–Ω–µ—Ç–∏–∫–∞ –∂–∏–≤–æ—Ç–Ω—ã—Ö."
    },
    "food_tech": {
        "name": "üçé –ü–∏—â–µ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏",
        "description": "–ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ —Å–µ–ª—å—Ö–æ–∑–ø—Ä–æ–¥—É–∫—Ü–∏–∏, —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤, –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞, –ø–∏—â–µ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å."
    },
    "business": {
        "name": "üìä –ë–∏–∑–Ω–µ—Å –∏ –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç –≤ –ê–ü–ö",
        "description": "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥—Ä–æ–ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è–º–∏, –º–∞—Ä–∫–µ—Ç–∏–Ω–≥, –ª–æ–≥–∏—Å—Ç–∏–∫–∞, —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑, –∞–≥—Ä–æ–±–∏–∑–Ω–µ—Å."
    },
    "ecology": {
        "name": "üåç –ê–≥—Ä–æ—ç–∫–æ–ª–æ–≥–∏—è –∏ —É—Å—Ç–æ–π—á–∏–≤–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ",
        "description": "–û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–æ–µ –∑–µ–º–ª–µ–¥–µ–ª–∏–µ, —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏—Ä–æ–¥–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤, –ø–µ—Ä–º–∞–∫—É–ª—å—Ç—É—Ä–∞."
    }
}


ANSWER_MAPPING = [

    {
        0: {"digital": 2, "business": 1},  # –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞ –∏ —Ñ–∏–∑–∏–∫–∞
        1: {"agronomy": 2, "livestock": 2, "ecology": 1},  # –ë–∏–æ–ª–æ–≥–∏—è –∏ —Ö–∏–º–∏—è
        2: {"food_tech": 2, "digital": 1},  # –¢—Ä—É–¥/–§–∏–∑—Ä–∞
        3: {"business": 2, "digital": 1}  # –û–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ
    },

    {
        0: {"digital": 3},
        1: {"livestock": 2, "ecology": 2, "agronomy": 1},
        2: {"food_tech": 3},
        3: {"business": 3}
    },

    {
        0: {"digital": 3},
        1: {"livestock": 2, "agronomy": 2, "ecology": 1},
        2: {"food_tech": 3},
        3: {"business": 2, "digital": 1}
    },

    {
        0: {"digital": 2, "business": 1},
        1: {"agronomy": 2, "livestock": 2, "ecology": 2},
        2: {"food_tech": 2, "digital": 1}
    },

    {
        0: {"digital": 3},
        1: {"business": 2, "digital": 1},
        2: {"business": 2, "food_tech": 1},
        3: {"ecology": 2, "agronomy": 1}  
    }
]

user_data = {}


async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.effective_user
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user_data[user.id] = {
        "current_q": 0,  # –¢–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å
        "answers": [],  # –°–ø–∏—Å–æ–∫ –æ—Ç–≤–µ—Ç–æ–≤
        "scores": defaultdict(int)  # –°—á–µ—Ç—á–∏–∫ –±–∞–ª–ª–æ–≤ –ø–æ –ø—Ä–æ—Ñ–∏–ª—è–º
    }

    await update.message.reply_text(
        "üëã –ü—Ä–∏–≤–µ—Ç! –ú–µ–Ω—è –∑–æ–≤—É—Ç –ê–≥—Ä–æ–ì–∏–¥. –Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –Ω–∞–π—Ç–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ —Å—Ñ–µ—Ä–µ –∞–≥—Ä–æ–ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–º–ø–ª–µ–∫—Å–∞, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Ç–µ–±–µ –ø–æ–Ω—Ä–∞–≤–∏—Ç—å—Å—è.\n"
        "–û—Ç–≤–µ—á–∞–π –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, –≤—ã–±–∏—Ä–∞—è –æ–¥–∏–Ω –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.\n"
        "–ü–æ–µ—Ö–∞–ª–∏! üöÄ"
    )

    await send_question(update, user.id)


async def send_question(update: Update, user_id):
    q_index = user_data[user_id]["current_q"]

    if q_index < len(questions):
        question = questions[q_index]
        # –°–æ–∑–¥–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤
        keyboard = [[opt] for opt in question["options"]]
        reply_markup = ReplyKeyboardMarkup(keyboard, resize_keyboard=True, one_time_keyboard=True)

        await update.message.reply_text(
            f"{question['q']}\n\n–í—ã–±–µ—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç:",
            reply_markup=reply_markup
        )
    else:
        # –í—Å–µ –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–æ–π–¥–µ–Ω—ã - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        await show_results(update, user_id)


async def handle_answer(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.effective_user

    if user.id not in user_data:
        await update.message.reply_text("–ù–∞–ø–∏—à–∏ /start, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ç–µ—Å—Ç üìù")
        return

    answer_text = update.message.text
    q_index = user_data[user.id]["current_q"]

    if q_index >= len(questions):
        return

    # –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
    question_options = questions[q_index]["options"]
    try:
        answer_index = question_options.index(answer_text)
    except ValueError:
        # –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–∏ –æ–¥–Ω–æ–º—É –≤–∞—Ä–∏–∞–Ω—Ç—É
        await update.message.reply_text("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏ –æ–¥–∏–Ω –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤!")
        return

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç
    user_data[user.id]["answers"].append(answer_index)

    # –ù–∞—á–∏—Å–ª—è–µ–º –±–∞–ª–ª—ã –ø—Ä–æ—Ñ–∏–ª—è–º –∑–∞ —ç—Ç–æ—Ç –æ—Ç–≤–µ—Ç
    if q_index < len(ANSWER_MAPPING):
        profile_points = ANSWER_MAPPING[q_index].get(answer_index, {})
        for profile, points in profile_points.items():
            user_data[user.id]["scores"][profile] += points

    # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É
    user_data[user.id]["current_q"] += 1
    await send_question(update, user.id)


async def show_results(update: Update, user_id):
    scores = user_data[user_id]["scores"]

    if not scores:
        await update.message.reply_text(
            "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã. –ü–æ–ø—Ä–æ–±—É–π –ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –µ—â–µ —Ä–∞–∑!",
            reply_markup=ReplyKeyboardMarkup([["/start"]], resize_keyboard=True)
        )
        del user_data[user_id]
        return

    # –ù–∞—Ö–æ–¥–∏–º –ø—Ä–æ—Ñ–∏–ª—å —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –±–∞–ª–ª–æ–≤
    sorted_profiles = sorted(scores.items(), key=lambda x: x[1], reverse=True)
    top_profile_key, top_score = sorted_profiles[0]

    # –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–ø-–ø—Ä–æ—Ñ–∏–ª–µ
    top_profile = APK_PROFILES[top_profile_key]

    # –°–æ–∑–¥–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    result_message = (
        "üéâ <b>–¢–ï–°–¢ –ó–ê–í–ï–†–®–ï–ù!</b>\n\n"
        f"<b>–ü–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º —Ç–µ—Å—Ç–∞, –º—ã –≤—ã—è—Å–Ω–∏–ª–∏, —á—Ç–æ –≤–∞–º –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –ø–æ–¥–æ–π–¥–µ—Ç:</b>\n"
        f"üéØ <u>{top_profile['name']}</u>\n\n"
        f"<b>–û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:</b>\n{top_profile['description']}\n\n"
    )

    # –î–æ–±–∞–≤–ª—è–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–∞–±—Ä–∞–ª–∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤
    if len(sorted_profiles) > 2:
        result_message += "<b>–¢–∞–∫–∂–µ –≤–∞–º –º–æ–≥—É—Ç –±—ã—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã:</b>\n"
        for i, (profile_key, score) in enumerate(sorted_profiles[1:4], 2):  # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ø-4
            profile = APK_PROFILES[profile_key]
            result_message += f"{i}. {profile['name']}\n"

    result_message += "\n –ù–µ –∑–Ω–∞–µ—Ç–µ —Å —á–µ–≥–æ –Ω–∞—á–∞—Ç—å, –∫–∞–∫–∏–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ –µ—Å—Ç—å –≤ –≤–∞—à–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∏–ª–∏ –≥–¥–µ –º–æ–∂–Ω–æ —ç—Ç–æ–º—É –Ω–∞—É—á–∏—Ç—å—Å—è?\n"
    result_message += "\n–¢–æ–≥–¥–∞ –ø—Ä–∏–≥–ª–∞—à–∞–µ–º –≤–∞—Å –Ω–∞ –Ω–∞—à —Å–∞–π—Ç! –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–≤–æ–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∏ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç–µ—Å—å —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞–º –ø–æ–¥–æ–π–¥—É—Ç!\n"
    result_message += 'agroguid.ru'

    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    await update.message.reply_text(
        result_message,
        parse_mode='HTML',
        reply_markup=ReplyKeyboardMarkup([["/start"]], resize_keyboard=True)
    )

    # –û—á–∏—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    del user_data[user_id]


def main():
    # ‚ö†Ô∏è –í–ê–ñ–ù–û: –ó–∞–º–µ–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –Ω–∞ —Å–≤–æ–π –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
    app = ApplicationBuilder().token(tok.TOKEN).build()

    app.add_handler(CommandHandler("start", start))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_answer))

    print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω! –ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏.")
    app.run_polling()


if __name__ == "__main__":
    main()